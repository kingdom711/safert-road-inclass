# Build and Environment Setup: Backend

## Building Process (Gradle)
- **Build**: `./gradlew clean build`
- **Run**: `./gradlew bootRun`
- **Test**: `./gradlew test`
- **Dependency Refresh**: `./gradlew --refresh-dependencies`

## Environment Variables & Configuration
Uses `application.yml` structure. Local development overrides can be set in `application-local.yml` or environment variables.

### Essential Variables
```bash
# Database
SPRING_DATASOURCE_URL=jdbc:mysql://localhost:3306/safety_road?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8
SPRING_DATASOURCE_USERNAME=your_db_user
SPRING_DATASOURCE_PASSWORD=your_db_password

# JWT
JWT_SECRET_KEY=your_secure_random_secret_key_base64_encoded_min_256_bits
JWT_EXPIRATION_MS=86400000

# AWS S3 (For Image Upload)
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_REGION=ap-northeast-2
AWS_S3_BUCKET=your_bucket_name

# AI Module
AI_ANALYSIS_API_URL=http://your-ai-service-url/analyze
```

## Project Structure
```
src/main/java/com/safetyroad/
├── common/            # Global configs, exceptions, utils
├── domain/            # Domain entities (Business Logic)
│   ├── auth/          # User, Role, Token
│   ├── checklist/     # Template, Instance, Item
│   ├── risk/          # AI Analysis, Risk assessment
│   └── action/        # Action records
├── api/               # Controllers (Web Layer)
└── infra/             # External integrations (S3, AI API)
```

## Local Database Setup
1. Install MySQL 8.x
2. Create Database: `CREATE DATABASE safety_road CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;`
3. Run Application (JPA `ddl-auto: update` or Flyway migration)
