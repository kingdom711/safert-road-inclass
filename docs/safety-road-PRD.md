# 안전의 길 (Safety Road) PRD v1.0
- **Owner 팀**: Safety Prototypes Team
- **최종 업데이트**: 2025-12-06
- **버전**: v1.0 (MVP)

## 1. 개요·목표
- **문제 정의 (Pain Points)**:
  - **보고 피로**: 현장 점검 리포트 작성과 보고 과정이 수기/분산되어 있어 시간이 많이 소요되고 누락이 발생함 (AOS 3.0).
  - **법적 리스크**: 중대재해처벌법 대응을 위한 증빙 자료(점검 이력, 조치 사진) 관리가 체계적이지 않아 법적 리스크가 존재함.
  - **데이터 단절**: 현장의 위험 요인이 실시간으로 관리자에게 전달되지 않아 즉각적인 조치가 어려움.
- **목표 (Desired Outcome)**:
  - 법정 자율점검표의 100% 전산화 및 모바일 제출 환경 구축.
  - 위험 요인(‘아니요’ 응답 및 AI 감지)의 실시간 가시화 및 조치율 90% 이상 달성.
- **성공 지표 (Success Metrics)**:
  - **북극성 지표**: 보고서 작성 및 결재 시간 50% 단축.
  - **보조 KPI**: 서류 분실/누락 0건, 위험 상황 인지 후 조치 착수 시간 단축.

## 2. 사용자와 페르소나
- **핵심 페르소나 (MVP Target)**:
  1. **김대리 (기술인/작업자)**: 점검·리포트 실무자. 복잡한 법령과 서류 작업으로 인한 피로도가 높음. (`P-01`)
     - *Needs*: 모바일로 쉽고 빠르게 체크리스트를 작성하고 제출하고 싶음.
  2. **박소장 (관리감독자)**: 현장 책임자. 서류 및 교육 이행 내역의 누락/분실을 걱정함. (`P-02`)
     - *Needs*: 제출된 점검표를 즉시 확인하고 승인/반려하여 관리 부담을 줄이고 싶음.
  3. **이팀장 (안전관리자)**: 리스크 관리자. 법적 책임 방어와 선제적 예방을 원함. (`P-03`)
     - *Needs*: 전체 현장의 위험 현황을 한눈에 파악하고 조치 이력을 증빙으로 남기고 싶음.

## 3. 사용자 스토리와 수용 기준 (User Stories & AC)

### Story 1: 작업 전 안전 점검 제출 (기술인)
**As a** 김대리(작업자),  
**I want** 작업 유형에 맞는 체크리스트를 모바일에서 바로 작성하고 사진을 첨부하여 제출하고 싶다,  
**So that** 번거로운 수기 서류 작업을 줄이고 작업을 빠르게 시작할 수 있다.

- **AC (Acceptance Criteria)**:
  - Given: 로그인 후 '새 체크리스트' 화면에 진입했을 때
  - When: '사다리 작업'을 선택하면
  - Then: 사다리 관련 법정 점검 항목이 자동으로 로딩되어야 한다 (1초 이내).
  - When: 필수 항목에 모두 응답하고 제출 버튼을 누르면
  - Then: 데이터가 서버에 저장되고 '제출 완료' 토스트 메시지가 떠야 하며, 감독자에게 알림(또는 상태 변경)이 가야 한다.

### Story 2: 위험 요인 AI 분석 및 알림 (시스템/안전관리자)
**As a** 이팀장(안전관리자),  
**I want** 작업자가 업로드한 사진에서 위험 요소를 시스템이 미리 감지해주길 원한다,  
**So that** 내가 모든 사진을 일일이 확인하지 않아도 고위험 작업을 우선적으로 파악할 수 있다.

- **AC**:
  - Given: 작업자가 체크리스트에 사진을 첨부하여 제출했을 때
  - When: 시스템이 이미지를 분석(AI Analysis)하여
  - Then: 위험(Danger), 주의(Warning), 안전(Safe) 중 하나의 등급을 반환해야 한다 (5초 이내).
  - When: '위험' 등급이 나오면
  - Then: 대시보드에서 해당 건이 빨간색 배지와 함께 상단에 노출되어야 한다.

### Story 3: 조치 이력 기록 및 승인 (감독자/안전관리자)
**As a** 박소장(감독자),  
**I want** 문제가 있는 점검표를 반려하거나 조치 사항을 기록하고 싶다,  
**So that** 현장의 안전이 확보된 상태에서만 작업이 진행되도록 통제할 수 있다.

- **AC**:
  - Given: '제출됨(Submitted)' 상태의 체크리스트를 조회했을 때
  - When: 위험 항목이 있어 '반려' 버튼을 누르고 사유를 입력하면
  - Then: 상태가 '반려됨'으로 변경되고 작업자가 이를 확인할 수 있어야 한다.
  - When: 안전 조치 후 '승인' 처리를 하면
  - Then: 최종 승인 상태로 변경되고, 해당 이력이 감사 로그에 남아야 한다.

## 4. 기능 요구사항 (Functional Requirements)

| 우선순위 | 구분 | 기능명 | 설명 및 근거 |
| :--- | :--- | :--- | :--- |
| **Must** | Auth | 사용자 인증 및 권한 관리 | 기술인/감독자/관리자 역할 구분 (보안 필수) |
| **Must** | Checklist | 템플릿 로딩 및 작성 | 사다리/고소/밀폐 3종 법정 서식 자동화 (P-01 해결) |
| **Must** | Review | 승인/반려 워크플로우 | 전자 결재를 통한 책임 소재 명확화 (P-02 해결) |
| **Should** | Risk | AI 사진 위험 분석 | 기본적인 위험도 분류(Safe/Danger)로 모니터링 효율 증대 |
| **Should** | Risk | 위험 현황 대시보드 | '아니요' 응답 및 AI 위험 건 우선 노출 (P-03 해결) |
| **Should** | Action | 조치 이력 관리 | 위험 발생 시 조치 전/후 사진 및 내용을 기록 |
| **Could** | Noti | 내 할 일(My Tasks) | 승인 대기/반려 건 등을 홈 화면에 요약 표시 |

## 5. 비기능 요구사항 (NFR)
- **성능**:
  - 체크리스트 로딩 및 제출 API 응답 시간: **p95 ≤ 3초**
  - AI 이미지 분석 처리 시간: **건당 ≤ 5초**
- **신뢰성/가용성**:
  - 동시 접속자 50명 기준 안정적 동작.
  - 데이터 무결성 보장 (제출된 체크리스트 위변조 방지 - 논리적).
- **보안**:
  - 모든 API는 JWT 인증 기반 호출.
  - 파일 업로드 시 확장자 검사 (이미지 파일만 허용).
  - 사용자별 데이터 접근 격리 (본인/팀 데이터만 조회).
- **모니터링**:
  - 주요 에러(5xx) 발생 시 로그 기록.
  - AI 분석 실패 시 수동 검토로 폴백(Fallback) 처리.

## 6. 데이터·인터페이스 개요
- **핵심 엔티티**:
  - `User`: 사용자 정보 및 역할 (Role).
  - `ChecklistTemplate`: 작업 유형별 점검 항목 정의 (불변성 유지).
  - `ChecklistInstance`: 실제 작성된 점검표 (User와 1:N).
  - `ChecklistItemResponse`: 개별 항목 응답 (Yes/No) 및 사진.
  - `ActionRecord`: 조치 내용 및 결과 사진.
- **인터페이스**:
  - RESTful API (JSON) 기반 통신.
  - `POST /api/checklists` (제출)
  - `POST /api/checklists/{id}/review` (승인/반려)
  - `POST /api/ai/analyze` (이미지 분석)

## 7. 범위 (In/Out), 리스크
- **범위 (Scope)**:
  - **In (MVP)**: 웹(모바일 웹 포함) 환경, 3대 위험작업(사다리/고소/밀폐), 기본 승인 프로세스, 기본 AI 분석.
  - **Out**: 네이티브 앱(iOS/Android), 복잡한 통계 리포트, 외부 시스템(HR 등) 연동, 실시간 채팅.
- **리스크 및 가정**:
  - **Risk**: 현장 인터넷 연결 불안정 시 이미지 업로드 지연 가능성. -> *대안: 로딩 UI 및 재시도 가이드 제공.*
  - **Risk**: AI 분석 정확도가 초기엔 낮을 수 있음. -> *가정: 보조 도구로만 활용하며 최종 판단은 사람이 함.*
  - **Dependency**: Google Gemini (또는 유사 Vision API) 사용 가능 여부.

## 8. 실험·롤아웃·측정
- **롤아웃 계획**:
  - **Alpha**: 내부 개발팀 및 QA 테스트.
  - **Beta**: 특정 현장(S1 위험 외주형 현장군) 1개소 선정하여 시범 운영.
- **측정 지표**:
  - 일일 제출되는 체크리스트 수.
  - 체크리스트 제출 후 승인까지 걸리는 평균 시간 (Lead Time).
  - AI가 감지한 'Danger' 건수 vs 실제 조치된 건수.

## 9. 근거 (Proof)
- **AOS-DOS 분석**: `P-01`(보고 혼잡)과 `P-02`(서류 관리)가 High AOS/High DOS 영역(Q1 혁신기회)에 위치함. 이를 MVP의 핵심 기능으로 선정.
- **참고 문서**:
  - [Integrated Value Proposition Sheet](./01_Integrated_Value_Proposition_Sheet.md)
  - [MVP Requirements Analysis](./00_MVP_Requirements_Analysis.md)
  - [GPT-SRS-V3](./GPT-SRS-V3.md)

